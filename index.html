<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Thunder</title>
    <style>
        :root {
            --primary: #e63946;
            --dark: #121212;
            --light: #f8f9fa;
            --overlay: rgba(0,0,0,0.7);
            --completed: rgba(255,255,255,0.1);
            --button-color: #a22a29;
            --button-border: #e53834;
            --complete-green: #4CAF50;
        }
        
        /* (Previous CSS remains the same until .weak-toggle) */
        
        .weak-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.75em;
            position: relative;
        }
        
        .weak-toggle .help-icon {
            color: #ccc;
            cursor: help;
            position: relative;
        }
        
        .weak-toggle .help-icon:hover::after {
            content: "This option reduces the reps by half";
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            white-space: nowrap;
            width: max-content;
        }
        
        /* (Previous switch styling remains the same) */
        
        .exercise-name {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }
        
        .exercise-name-text {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .exercise-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .remove-exercise-btn {
            background: var(--button-color) !important;
            border: 1px solid var(--button-border) !important;
            color: white;
            padding: 3px 8px !important;
            font-size: 0.9em;
            cursor: pointer;
            border-radius: 3px;
            margin-left: 5px;
        }
        
        /* (Rest of the CSS remains the same) */
    </style>
</head>
<body>
    <!-- (Previous HTML remains the same) -->

    <script>
        // (Previous JavaScript remains the same until renderExercises function)

        function renderExercises() {
            exercisesListEl.innerHTML = "";
            
            displayOrder.forEach(muscle => {
                if (userState.currentWorkout.exercises[muscle].length > 0) {
                    // (Previous group creation code remains the same)
                    
                    userState.currentWorkout.exercises[muscle].forEach(ex => {
                        const exerciseEl = document.createElement("div");
                        exerciseEl.className = "exercise";
                        if (ex.completed) exerciseEl.classList.add("completed");
                        exerciseEl.id = ex.id;
                        
                        const reps = userState.weakMode[ex.id] ? Math.floor(ex.reps / 2) : ex.reps;
                        
                        exerciseEl.innerHTML = `
                            <div class="exercise-info">
                                <div class="exercise-name">
                                    <div class="exercise-name-text">
                                        ${ex.name} <span class="exercise-reps" data-base-reps="${ex.reps}">(${reps} reps)</span>
                                        <span class="exercise-difficulty">${"★".repeat(ex.difficulty)}</span>
                                    </div>
                                    <div class="exercise-controls">
                                        <button class="remove-exercise-btn ${ex.completed ? 'disabled' : ''}">X</button>
                                        <button class="complete-btn ${ex.completed ? 'completed' : ''}" ${ex.completed ? 'disabled' : ''}>
                                            ${ex.completed ? '✓ Done' : 'Complete'}
                                        </button>
                                    </div>
                                </div>
                                <label class="weak-toggle">
                                    <label class="switch">
                                        <input type="checkbox" id="weak-${ex.id}" ${userState.weakMode[ex.id] ? "checked" : ""} ${ex.completed ? 'disabled' : ''}>
                                        <span class="slider"></span>
                                    </label>
                                    <span>I'm weak</span>
                                    <span class="help-icon">?</span>
                                </label>
                            </div>
                        `;
                        
                        if (!ex.completed) {
                            exerciseEl.querySelector(".complete-btn").addEventListener("click", () => completeExercise(ex.id));
                            exerciseEl.querySelector(".remove-exercise-btn").addEventListener("click", (e) => {
                                e.stopPropagation();
                                removeExercise(ex.id);
                            });
                        }
                        exerciseEl.querySelector(".weak-toggle input").addEventListener("change", () => toggleWeakMode(ex.id));
                        
                        exercisesContainer.appendChild(exerciseEl);
                    });
                    
                    groupEl.appendChild(exercisesContainer);
                    exercisesListEl.appendChild(groupEl);
                }
            });
            
            toggleAllBtn.textContent = "Collapse All";
            checkAllCompleted();
        }

        // (Rest of the JavaScript remains the same)
    </script>
</body>
</html>
